{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./BudgetSetter.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=\"http://localhost:3001\";function BudgetSetter(){const[budget,setBudget]=useState('');const[currentBudget,setCurrentBudget]=useState();useEffect(()=>{fetchCurrentBudget();},[]);const fetchCurrentBudget=async()=>{try{const response=await axios.get(\"\".concat(API_BASE,\"/budget\"));setCurrentBudget(response.data[0].budget);// Ensure this matches the response structure\n}catch(error){console.error('Error fetching budget:',error);}};const deleteExistingBudgets=async()=>{try{await axios.delete(\"\".concat(API_BASE,\"/deletebudget\"));}catch(error){console.error('Error deleting existing budgets:',error);}};const handleSubmit=async event=>{event.preventDefault();try{await deleteExistingBudgets();await axios.post(\"\".concat(API_BASE,\"/newbudget\"),{budget});//alert('Budget set successfully');\nfetchCurrentBudget();// Refresh the displayed budget\n}catch(error){console.error('Error setting budget:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"budget-setter\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Set Your Budget\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"budget-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:budget,onChange:e=>setBudget(e.target.value),placeholder:\"Enter your budget\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Set Budget\"})]}),currentBudget!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"current-budget\",children:[\"Current Budget: \",currentBudget,\" SAR\"]})]});}export default BudgetSetter;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","API_BASE","BudgetSetter","budget","setBudget","currentBudget","setCurrentBudget","fetchCurrentBudget","response","get","concat","data","error","console","deleteExistingBudgets","delete","handleSubmit","event","preventDefault","post","className","children","onSubmit","type","value","onChange","e","target","placeholder"],"sources":["C:/Users/saudk/Desktop/Senior/Project/client/src/BudgetSetter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './BudgetSetter.css';\r\n\r\nconst API_BASE = \"http://localhost:3001\";\r\n\r\nfunction BudgetSetter() {\r\n  const [budget, setBudget] = useState('');\r\n  const [currentBudget, setCurrentBudget] = useState();\r\n\r\n  useEffect(() => {\r\n    fetchCurrentBudget();\r\n  }, []);\r\n\r\n  const fetchCurrentBudget = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/budget`);\r\n      setCurrentBudget(response.data[0].budget); // Ensure this matches the response structure\r\n    } catch (error) {\r\n      console.error('Error fetching budget:', error);\r\n    }\r\n  }\r\n\r\n  const deleteExistingBudgets = async () => {\r\n    try {\r\n      await axios.delete(`${API_BASE}/deletebudget`);\r\n    } catch (error) {\r\n      console.error('Error deleting existing budgets:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      await deleteExistingBudgets();\r\n      await axios.post(`${API_BASE}/newbudget`, { budget });\r\n      //alert('Budget set successfully');\r\n      fetchCurrentBudget(); // Refresh the displayed budget\r\n    } catch (error) {\r\n      console.error('Error setting budget:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"budget-setter\">\r\n      <h4>Set Your Budget</h4>\r\n      <form onSubmit= {handleSubmit} className=\"budget-form\">\r\n        <input\r\n          type=\"number\"\r\n          value={budget}\r\n          onChange={(e) => setBudget(e.target.value)}\r\n          placeholder=\"Enter your budget\"\r\n        />\r\n        <button type=\"submit\">Set Budget</button>\r\n      </form>\r\n      {currentBudget !== null && (\r\n        <div className=\"current-budget\">\r\n          Current Budget: {currentBudget} SAR\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BudgetSetter;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5B,KAAM,CAAAC,QAAQ,CAAG,uBAAuB,CAExC,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACtB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACW,aAAa,CAAEC,gBAAgB,CAAC,CAAGZ,QAAQ,CAAC,CAAC,CAEpDC,SAAS,CAAC,IAAM,CACdY,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAZ,KAAK,CAACa,GAAG,IAAAC,MAAA,CAAIT,QAAQ,WAAS,CAAC,CACtDK,gBAAgB,CAACE,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC,CAACR,MAAM,CAAC,CAAE;AAC7C,CAAE,MAAOS,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAE,qBAAqB,CAAG,KAAAA,CAAA,GAAY,CACxC,GAAI,CACF,KAAM,CAAAlB,KAAK,CAACmB,MAAM,IAAAL,MAAA,CAAIT,QAAQ,iBAAe,CAAC,CAChD,CAAE,MAAOW,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CAC1D,CACF,CAAC,CAED,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CACpCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,GAAI,CACF,KAAM,CAAAJ,qBAAqB,CAAC,CAAC,CAC7B,KAAM,CAAAlB,KAAK,CAACuB,IAAI,IAAAT,MAAA,CAAIT,QAAQ,eAAc,CAAEE,MAAO,CAAC,CAAC,CACrD;AACAI,kBAAkB,CAAC,CAAC,CAAE;AACxB,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED,mBACEZ,KAAA,QAAKoB,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BvB,IAAA,OAAAuB,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBrB,KAAA,SAAMsB,QAAQ,CAAGN,YAAa,CAACI,SAAS,CAAC,aAAa,CAAAC,QAAA,eACpDvB,IAAA,UACEyB,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAErB,MAAO,CACdsB,QAAQ,CAAGC,CAAC,EAAKtB,SAAS,CAACsB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC3CI,WAAW,CAAC,mBAAmB,CAChC,CAAC,cACF9B,IAAA,WAAQyB,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,YAAU,CAAQ,CAAC,EACrC,CAAC,CACNhB,aAAa,GAAK,IAAI,eACrBL,KAAA,QAAKoB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAAC,kBACd,CAAChB,aAAa,CAAC,MACjC,EAAK,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAAH,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}